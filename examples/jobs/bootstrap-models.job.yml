# yaml-language-server: $schema=../../schemas/v2/job.yaml
#
# Bootstrap Models Job
#
# This job fetches available models from all LLM providers and generates
# TypeScript constant files with modern, recommended models only.
#
# Usage:
#   pnpm start -- examples/jobs/bootstrap-models.job.yml

provider:
  type: anthropic
  model: claude-sonnet-4-5-20250929

task: |
  Your task is to update the provider files in ./src/ai/<provider>/models.ts

  I have a script that is in ./scripts/getModels.ts. You can run it using `npx ./scripts/getModels.ts`.
  This file contains a script that runs against all the different APIs in this repository
  (OpenAI, Gemini, and Anthropic). If you run the script, it will return all models available in the API.

  Now I need you to filter the models to only include modern, recommended models.
  Todays date is {{ date }} and modern means models released in the last 24 months
  or so.

  Filter criteria:
  - Skip deprecated models (anything with "deprecated" in the name)
  - Skip fine-tuned models (ft:*, *-ft-*, etc.)
  - Skip embedding models (text-embedding-*, embed-*)
  - Skip audio/speech models (whisper-*, tts-*)
  - Skip image generation models (dall-e-*)
  - Keep flagship chat/completion models
  - For versioned models, prefer the latest stable version

  For each provider, output TypeScript code with:
  1. The current model files are in src/providers/<provider>/models.ts
  2. Use the current models files as an example of what to produce, since the
     constants are used by other parts of the codebase.
  2. If the model names are dated, e.g., claude-opus-4-5-20251101, please also
     create aliases for the model names, i.e. CLAUDE_SONNET_4_5.
  3. Use the cheap models (Haiku, OpenAI 5 mini, Gemini Flash equivalent) as
     the default model

  Format the output as a single TypeScript file that can be used to replace
  the existing model definitions.

tools:
  - exec
  - write-file
  - read-file
  - patch-file
